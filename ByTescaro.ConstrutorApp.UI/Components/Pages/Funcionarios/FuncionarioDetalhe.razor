@page "/funcionarios/detalhes/{Id:long}"

@using ByTescaro.ConstrutorApp.Application.DTOs
@using ByTescaro.ConstrutorApp.Domain.Enums
@using ByTescaro.ConstrutorApp.UI.Services
@using Microsoft.AspNetCore.Authorization
@inject FuncionarioApiService FuncionarioApiService
@inject NavigationManager Navigation
@attribute [Authorize]

<PageTitle>Detalhes do Funcionário</PageTitle>

<RadzenCard Class="rz-mt-4 rz-p-4">
    <RadzenHeading Size="H5" Text="Detalhes do Funcionário" />

    @if (funcionario is null)
    {
        <RadzenAlert Severity="AlertSeverity.Error" Summary="Funcionário não encontrado." />
    }
    else
    {
        <RadzenFieldset Text="Informações Gerais">
            <RadzenRow>
                <RadzenColumn Size="6">
                    <RadzenTextBox Name="Nome" @bind-Value="funcionario.Nome" ReadOnly Style="width:100%" />
                </RadzenColumn>
                <RadzenColumn Size="6">
                    <RadzenTextBox Name="FuncaoNome" @bind-Value="funcionario.FuncaoNome" ReadOnly Style="width:100%" />
                </RadzenColumn>
                <RadzenColumn Size="6">
                    <RadzenTextBox Name="TipoPessoa" Value="@funcionario.TipoPessoa.ToString()" ReadOnly Style="width:100%" />
                </RadzenColumn>

         

                <RadzenColumn Size="6">
                    <RadzenTextBox Name="CpfCnpj" @bind-Value="funcionario.CpfCnpj" ReadOnly Style="width:100%" />
                </RadzenColumn>
                <RadzenColumn Size="6">
                    <RadzenTextBox Name="Salario" Value="@funcionario.Salario?.ToString("C2")" ReadOnly Style="width:100%" />
                </RadzenColumn>
                <RadzenColumn Size="6">
                    <RadzenTextBox Name="DataAdmissao" Value="@funcionario.DataAdmissao?.ToString("dd/MM/yyyy")" ReadOnly Style="width:100%" />
                </RadzenColumn>
                <RadzenColumn Size="6">
                    <RadzenTextBox Name="DataDemissao" Value="@funcionario.DataDemissao?.ToString("dd/MM/yyyy")" ReadOnly Style="width:100%" />
                </RadzenColumn>
            </RadzenRow>
        </RadzenFieldset>

        <RadzenFieldset Text="Contato">
            <RadzenRow>
                <RadzenColumn Size="6">
                    <RadzenTextBox Name="TelefonePrincipal" @bind-Value="funcionario.TelefonePrincipal" ReadOnly Style="width:100%" />
                </RadzenColumn>
                <RadzenColumn Size="6">
                    <RadzenTextBox Name="TelefoneWhatsApp" @bind-Value="funcionario.TelefoneWhatsApp" ReadOnly Style="width:100%" />
                </RadzenColumn>
                <RadzenColumn Size="6">
                    <RadzenTextBox Name="Email" @bind-Value="funcionario.Email" ReadOnly Style="width:100%" />
                </RadzenColumn>
            </RadzenRow>
        </RadzenFieldset>

        <RadzenFieldset Text="Endereço">
            <RadzenRow>
                <RadzenColumn Size="4">
                    <RadzenTextBox Name="Logradouro" @bind-Value="funcionario.Logradouro" ReadOnly Style="width:100%" />
                </RadzenColumn>
                <RadzenColumn Size="2">
                    <RadzenTextBox Name="Numero" @bind-Value="funcionario.Numero" ReadOnly Style="width:100%" />
                </RadzenColumn>
                <RadzenColumn Size="3">
                    <RadzenTextBox Name="Bairro" @bind-Value="funcionario.Bairro" ReadOnly Style="width:100%" />
                </RadzenColumn>
                <RadzenColumn Size="3">
                    <RadzenTextBox Name="Complemento" @bind-Value="funcionario.Complemento" ReadOnly Style="width:100%" />
                </RadzenColumn>
                <RadzenColumn Size="4">
                    <RadzenTextBox Name="Cidade" @bind-Value="funcionario.Cidade" ReadOnly Style="width:100%" />
                </RadzenColumn>
                <RadzenColumn Size="4">
                    <RadzenTextBox Name="Estado" @bind-Value="funcionario.Estado" ReadOnly Style="width:100%" />
                </RadzenColumn>
                <RadzenColumn Size="2">
                    <RadzenTextBox Name="UF" @bind-Value="funcionario.UF" ReadOnly Style="width:100%" />
                </RadzenColumn>
                <RadzenColumn Size="2">
                    <RadzenTextBox Name="CEP" @bind-Value="funcionario.CEP" ReadOnly Style="width:100%" />
                </RadzenColumn>
            </RadzenRow>
        </RadzenFieldset>

        <RadzenRow class="rz-mt-4 rz-justify-end">
            <RadzenButton Text="Voltar" ButtonStyle="ButtonStyle.Secondary" Click=@(() => Navigation.NavigateTo("/funcionarios")) class="rz-mr-2" />
            <RadzenButton Text="Editar" ButtonStyle="ButtonStyle.Primary" Click=@(() => Navigation.NavigateTo($"/funcionarios/editar/{funcionario.Id}")) />
        </RadzenRow>
    }
</RadzenCard>

@code {
    [Parameter] public long Id { get; set; }
    private FuncionarioDto? funcionario;

    protected override async Task OnInitializedAsync()
    {
        funcionario = await FuncionarioApiService.GetByIdAsync(Id);
    }
}