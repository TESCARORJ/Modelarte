@page "/cliente/detalhes/{Id:long}"

@using ByTescaro.ConstrutorApp.Application.DTOs
@using ByTescaro.ConstrutorApp.UI.Services
@using Microsoft.AspNetCore.Authorization
@inject ClienteApiService ClienteApiService
@inject NavigationManager Navigation
@attribute [Authorize]

<PageTitle>Detalhes do Cliente</PageTitle>

<RadzenCard Class="rz-mt-5 rz-p-4 rz-shadow-md rz-rounded-md rz-mx-auto" Style="max-width: 1300px; width: 100%;">
    <RadzenHeading Size="H5" Style="padding: 1rem;">Detalhes do Cliente</RadzenHeading>

    @if (cliente is null)
    {
        <RadzenText Text="Cliente não encontrado." Style="color: red; padding: 1rem;" />
    }
    else
    {
        <RadzenRow Class="rz-p-4" Style="row-gap: 1rem;">
            <RadzenColumn Size="12" SizeMD="6">
                <RadzenLabel Text="Nome" />
                <RadzenTextBox Value="@cliente.Nome" ReadOnly Style="width:100%" />
            </RadzenColumn>

            <RadzenColumn Size="12" SizeMD="3">
                <RadzenLabel Text="Tipo de Pessoa" />
                <RadzenTextBox Value="@cliente.TipoPessoa.ToString()" ReadOnly Style="width:100%" />
            </RadzenColumn>

            <RadzenColumn Size="12" SizeMD="3">
                <RadzenLabel Text="CPF ou CNPJ" />
                <RadzenTextBox Value="@cliente.CpfCnpj" ReadOnly Style="width:100%" />
            </RadzenColumn>

            <RadzenColumn Size="12" SizeMD="4">
                <RadzenLabel Text="Telefone Principal" />
                <RadzenTextBox Value="@cliente.TelefonePrincipal" ReadOnly Style="width:100%" />
            </RadzenColumn>

            <RadzenColumn Size="12" SizeMD="4">
                <RadzenLabel Text="WhatsApp" />
                <RadzenTextBox Value="@cliente.TelefoneWhatsApp" ReadOnly Style="width:100%" />
            </RadzenColumn>

            <RadzenColumn Size="12" SizeMD="4">
                <RadzenLabel Text="Email" />
                <RadzenTextBox Value="@cliente.Email" ReadOnly Style="width:100%" />
            </RadzenColumn>

            <RadzenColumn Size="12" SizeMD="2">
                <RadzenLabel Text="CEP" />
                <RadzenTextBox Value="@cliente.CEP" ReadOnly Style="width:100%" />
            </RadzenColumn>

            <RadzenColumn Size="12" SizeMD="5">
                <RadzenLabel Text="Logradouro" />
                <RadzenTextBox Value="@cliente.Logradouro" ReadOnly Style="width:100%" />
            </RadzenColumn>

            <RadzenColumn Size="12" SizeMD="1">
                <RadzenLabel Text="Número" />
                <RadzenTextBox Value="@cliente.Numero" ReadOnly Style="width:100%" />
            </RadzenColumn>

            <RadzenColumn Size="12" SizeMD="4">
                <RadzenLabel Text="Complemento" />
                <RadzenTextBox Value="@cliente.Complemento" ReadOnly Style="width:100%" />
            </RadzenColumn>

            <RadzenColumn Size="12" SizeMD="4">
                <RadzenLabel Text="Bairro" />
                <RadzenTextBox Value="@cliente.Bairro" ReadOnly Style="width:100%" />
            </RadzenColumn>

            <RadzenColumn Size="12" SizeMD="4">
                <RadzenLabel Text="Cidade" />
                <RadzenTextBox Value="@cliente.Cidade" ReadOnly Style="width:100%" />
            </RadzenColumn>

            <RadzenColumn Size="12" SizeMD="3">
                <RadzenLabel Text="Estado" />
                <RadzenTextBox Value="@cliente.Estado" ReadOnly Style="width:100%" />
            </RadzenColumn>

            <RadzenColumn Size="12" SizeMD="1">
                <RadzenLabel Text="UF" />
                <RadzenTextBox Value="@cliente.UF" ReadOnly Style="width:100%" />
            </RadzenColumn>
        </RadzenRow>

        <RadzenDivider Style="margin: 2rem 0;" />

        <RadzenRow Class="rz-px-4 rz-mb-2" JustifyContent="JustifyContent.End" Style="gap: 1rem;">
            <RadzenButton Text="Voltar"
                          Click="@(() => Navigation.NavigateTo("/clientes"))"
                          ButtonStyle="ButtonStyle.Light" />

            <RadzenButton Text="Editar"
                          Icon="edit"
                          Click="@(() => Navigation.NavigateTo($"/cliente/editar/{cliente.Id}"))"
                          ButtonStyle="ButtonStyle.Primary" />
        </RadzenRow>
    }
</RadzenCard>

@code {
    [Parameter] public long Id { get; set; }

    private ClienteDto? cliente;

    protected override async Task OnInitializedAsync()
    {
        cliente = await ClienteApiService.GetByIdAsync(Id);
    }
}
